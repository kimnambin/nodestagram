<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  
  <div class="card">
       <div class="card-body">
        <a href ="/mainpage" style="text-decoration: none; color:black; font-size:30px; margin-left:440px;">x</a>
        <h5 class="card-title" style="display: flex; align-items: center; margin-right: 0;">
            <img src="/images/profile.jpg" style="height: 100px; width: 100px; margin-right:10px;">
            <div class= "profileTitle" style ="display: flex; flex-direction: column; margin-left: 15px;">
              <p style = "margin-right: 10px;"><%= user_id %></p>
              <p style = "margin-right: 10px">🎉<%= user_id %>🎉님의 프로필입니다!! </p>
              </div> 
              </h5>
              <hr style="width: 100%; height: 1px; background-color: #dbdbdb; border: none; margin: 5px 0;">
          
            
  
            <!-- 현재는 모든 스토리가 다 보이지만 현재 아이디만 보이도록 수정 예정 s-->
            <div class="story-container" style="display: flex; flex-direction: row; margin-right: auto; margin-left:30px; margin-bottom: 10px;">
                <% storyposts.forEach((storypost=> { %>
                <div class="story">
                    <a href = "/storydetail/<%= storypost.userId %>">
                  <img src="/images/profile.jpg" style=" border: solid 0.1rem grey;
                  border-radius: 50%; width: 60px; height: 60px; border-radius: 50% ;">
                </a>
                </div>
                <% })) %>
                <p style ='margin-left:10px;'>하이라이트</p>
            </div>
          
      <hr style="width: 100%; height: 1px; background-color: #dbdbdb; border: none; margin: 5px 0;">
    
      <div class="container" style="display: flex; flex-wrap: wrap; justify-content: center; margin-top: 20px;">
        <% let count = 0; %>
        <% posts.forEach((post) => { 
             if (post.userId === user_id) { 
                 const postId = post.userId; 
                 const matchingFiles = files.filter(file => file.startsWith(postId + '-')); 
                 matchingFiles.forEach(matchingFile => { %>
                  <div class="posting-card" style="flex-basis: calc(33.33% - 10px); margin-bottom: 20px; padding: 0;">
                    <div class="posting-img">
                        <img src="/uploads/<%= matchingFile %>" style="height: 150px; width: 150px;">
                    </div>
                </div>
                
                    <% count++; 
               })}}) %>
    </div>
    
    
    
      
      

    </div>   
  </div>
</div>


    <style>
     

  /* card 요소를 중앙에 배치 */
  .card {
    align-items: center;
    background-color: #ffffff;
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
    margin-bottom: 0.4rem;
    padding: 1.25rem 0;
  }

  .card-body{
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center;
    border: solid 0.1rem #dbdbdb;
    border-radius: 0.3rem;
  }

  .story-image {
    position: absolute;
    top: 0;
    left: 0;
    height: 460px; 
    width: 380px; 
    margin-right:10px; 
  }

    </style>
    
</body>
</html>
